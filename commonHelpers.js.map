{"version":3,"file":"commonHelpers.js","sources":["../src/favorites.js"],"sourcesContent":["import messages from './js/notificationAPI';\nimport localStorageAPI from './js/localStorageAPI';\nimport { exerciseCardMarkup, paginationMarkup } from './js/renderMarkup';\n\nimport './js/initialization';\n\nconst MOBILE_LIMIT = 8;\nlet isMobileDevice = document.documentElement.scrollWidth < 768;\n\nconst emptyListBlock = document.querySelector('.favorites-not-found-exercises');\nconst favoritesList = document.querySelector('.favorites-exercises-list');\nconst paginationList = document.querySelector('.pagination-list');\n\nfavoritesList.addEventListener('click', favoritesListHandler);\npaginationList.addEventListener('click', pageChangeHandler);\n\nwindow.addEventListener('resize', () => {\n  if (isMobileDevice !== document.documentElement.scrollWidth < 768) {\n    isMobileDevice = !isMobileDevice;\n    renderFavoritesList();\n  }\n});\n\nrenderFavoritesList();\n\nfunction renderFavoritesList(page = 1) {\n  const items = localStorageAPI.getFavorites();\n\n  if (isMobileDevice && items.length > MOBILE_LIMIT) {\n    paginationList.classList.remove('visually-hidden');\n    paginationList.innerHTML = paginationMarkup(\n      Math.ceil(items.length / MOBILE_LIMIT)\n    );\n    favoritesList.innerHTML = items\n      .slice((page - 1) * MOBILE_LIMIT, page * MOBILE_LIMIT)\n      .map(item => exerciseCardMarkup(item, true))\n      .join('');\n  } else {\n    paginationList.classList.add('visually-hidden');\n    paginationList.innerHTML = '';\n    favoritesList.innerHTML = items\n      .map(item => exerciseCardMarkup(item, true))\n      .join('');\n  }\n\n  items.length > 0\n    ? emptyListBlock.classList.add('visually-hidden')\n    : emptyListBlock.classList.remove('visually-hidden');\n\n  // if (items.length > 0) {\n  //   if (!emptyListBlock.classList.contains('visually-hidden')) {\n  //     emptyListBlock.classList.add('visually-hidden');\n  //   }\n  // } else {\n  //   emptyListBlock.classList.remove('visually-hidden');\n  // }\n}\n\nfunction pageChangeHandler(event) {\n  if (event.target.nodeName === 'A') {\n    event.preventDefault();\n    renderFavoritesList(Number(event.target.innerText));\n    paginationList.innerHTML = paginationMarkup(\n      event.currentTarget.children.length,\n      Number(event.target.innerText)\n    );\n  }\n}\n\nfunction favoritesListHandler(event) {\n  const isStartButton = event.target.closest('.exercise-card-start-btn');\n  if (isStartButton) {\n    // open modal-exercise\n    alert(isStartButton.getAttribute('data-open-id'));\n  }\n\n  const isRemoveButton = event.target.closest('.exercise-card-remove-btn');\n  if (isRemoveButton) {\n    localStorageAPI.deleteItemFromFavorites(\n      isRemoveButton.getAttribute('data-delete-id')\n    );\n    renderFavoritesList();\n  }\n}\n"],"names":["MOBILE_LIMIT","isMobileDevice","emptyListBlock","favoritesList","paginationList","favoritesListHandler","pageChangeHandler","renderFavoritesList","page","items","localStorageAPI","paginationMarkup","item","exerciseCardMarkup","event","isStartButton","isRemoveButton"],"mappings":"0GAMA,MAAMA,EAAe,EACrB,IAAIC,EAAiB,SAAS,gBAAgB,YAAc,IAE5D,MAAMC,EAAiB,SAAS,cAAc,gCAAgC,EACxEC,EAAgB,SAAS,cAAc,2BAA2B,EAClEC,EAAiB,SAAS,cAAc,kBAAkB,EAEhED,EAAc,iBAAiB,QAASE,CAAoB,EAC5DD,EAAe,iBAAiB,QAASE,CAAiB,EAE1D,OAAO,iBAAiB,SAAU,IAAM,CAClCL,IAAmB,SAAS,gBAAgB,YAAc,MAC5DA,EAAiB,CAACA,EAClBM,IAEJ,CAAC,EAEDA,IAEA,SAASA,EAAoBC,EAAO,EAAG,CACrC,MAAMC,EAAQC,EAAgB,eAE1BT,GAAkBQ,EAAM,OAAST,GACnCI,EAAe,UAAU,OAAO,iBAAiB,EACjDA,EAAe,UAAYO,EACzB,KAAK,KAAKF,EAAM,OAAST,CAAY,CAC3C,EACIG,EAAc,UAAYM,EACvB,OAAOD,EAAO,GAAKR,EAAcQ,EAAOR,CAAY,EACpD,IAAIY,GAAQC,EAAmBD,EAAM,EAAI,CAAC,EAC1C,KAAK,EAAE,IAEVR,EAAe,UAAU,IAAI,iBAAiB,EAC9CA,EAAe,UAAY,GAC3BD,EAAc,UAAYM,EACvB,IAAIG,GAAQC,EAAmBD,EAAM,EAAI,CAAC,EAC1C,KAAK,EAAE,GAGZH,EAAM,OAAS,EACXP,EAAe,UAAU,IAAI,iBAAiB,EAC9CA,EAAe,UAAU,OAAO,iBAAiB,CASvD,CAEA,SAASI,EAAkBQ,EAAO,CAC5BA,EAAM,OAAO,WAAa,MAC5BA,EAAM,eAAc,EACpBP,EAAoB,OAAOO,EAAM,OAAO,SAAS,CAAC,EAClDV,EAAe,UAAYO,EACzBG,EAAM,cAAc,SAAS,OAC7B,OAAOA,EAAM,OAAO,SAAS,CACnC,EAEA,CAEA,SAAST,EAAqBS,EAAO,CACnC,MAAMC,EAAgBD,EAAM,OAAO,QAAQ,0BAA0B,EACjEC,GAEF,MAAMA,EAAc,aAAa,cAAc,CAAC,EAGlD,MAAMC,EAAiBF,EAAM,OAAO,QAAQ,2BAA2B,EACnEE,IACFN,EAAgB,wBACdM,EAAe,aAAa,gBAAgB,CAClD,EACIT,IAEJ"}