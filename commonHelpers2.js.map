{"version":3,"file":"commonHelpers2.js","sources":["../src/js/notificationAPI.js","../src/js/excercises.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst messages = {\n  showInfo: textMessage => {\n    showMessage(textMessage, 'info');\n  },\n  showSuccess: textMessage => {\n    showMessage(textMessage, 'success');\n  },\n  showError: textMessage => {\n    showMessage(textMessage, 'error');\n  },\n};\n\nexport default messages;\n\nconst showMessage = (message, type = '') => {\n  iziToast[type]({\n    title: message,\n    position: 'bottomCenter',\n    closeOnEscape: true,\n    closeOnClick: true,\n    timeout: 5000,\n  });\n};\n","import backendAPI from './backendAPI';\nimport renderAPI from './renderMarkup';\n\nlet isMobileDevice;\nlet isDesktopDevice;\n\nconst filterListElem = document.querySelector('.exercises-type-list');\nconst exerciseListElem = document.querySelector('.exercises-gallery-list');\nconst paginationListElem = document.querySelector('.pagination-list');\nconst searchFormElem = document.querySelector('.exercises-type-form');\nconst inputElement = document.querySelector('.exercises-form-input');\nconst clearButton = document.querySelector('.exercises-form-btn-clear');\n\nexport default function startExercisesScenario() {\n  isMobileDevice = document.documentElement.scrollWidth < 768;\n  isDesktopDevice = document.documentElement.scrollWidth >= 1440;\n\n  filterListElem.addEventListener('click', filterListHandler);\n  exerciseListElem.addEventListener('click', exerciseListHandler);\n  paginationListElem.addEventListener('click', paginationListHandler);\n\n  searchFormElem.addEventListener('submit', searchFormSubmitHandler);\n  inputElement.addEventListener('input', inputElementHandler);\n  clearButton.addEventListener('click', clearButtonHandler);\n\n  window.addEventListener('resize', windowResizeHandler);\n\n  renderGroups();\n}\n\nfunction windowResizeHandler() {\n  let isDeviceChange = false;\n  if (isMobileDevice !== document.documentElement.scrollWidth < 768) {\n    isDeviceChange = true;\n    isMobileDevice = !isMobileDevice;\n  }\n\n  if (isDesktopDevice !== document.documentElement.scrollWidth >= 1440) {\n    isDeviceChange = true;\n    isDesktopDevice = !isDesktopDevice;\n  }\n\n  if (isDeviceChange) {\n    exerciseListElem.dataset.isGroups ? renderGroups() : renderExercises();\n  }\n}\n\nfunction searchFormSubmitHandler(event) {\n  event.preventDefault();\n  renderExercises();\n}\n\nfunction inputElementHandler() {\n  const inputValue = inputElement.value.trim();\n  clearButton.style.display = inputValue.length > 0 ? 'block' : 'none';\n}\n\nfunction clearButtonHandler() {\n  searchFormElem.reset();\n  clearButton.style.display = 'none';\n  renderExercises();\n}\n\nasync function renderGroups(page = 1) {\n  exerciseListElem.dataset.isGroups = 'true';\n  exerciseListElem.dataset.groupName = '';\n\n  const queryParams = {\n    filter: getActiveFilterElem().dataset.filter,\n    limit: isMobileDevice ? 8 : 12,\n    page,\n  };\n\n  const filtersData = await backendAPI.getFilterData(queryParams);\n\n  renderItems(filtersData);\n}\n\nasync function renderExercises(page = 1) {\n  const queryParams = {\n    [getActiveFilterElem().dataset.exerciseFilter]:\n      exerciseListElem.dataset.groupName,\n    limit: isDesktopDevice ? 9 : 8,\n    page,\n  };\n\n  const keyword = inputElement.value.trim();\n  if (keyword) {\n    queryParams.keyword = keyword;\n  }\n\n  const exercisesData = await backendAPI.getExercisesData(queryParams);\n  renderItems(exercisesData, true);\n}\n\nfunction renderItems(serverData = {}, isCards = false) {\n  // {\n  //   \"page\": \"1\",\n  //   \"perPage\": \"8\",\n  //   \"totalPages\": 2,\n  //   \"results\": [],\n  // }\n\n  const { results = [], totalPages = 1, page = 1 } = serverData;\n\n  const markup = isCards\n    ? results.map(elem => renderAPI.exerciseCardMarkup(elem)).join('')\n    : results.map(elem => renderAPI.filterGroupsMarkup(elem)).join('');\n\n  exerciseListElem.innerHTML = markup;\n  paginationListElem.innerHTML = renderAPI.paginationMarkup(totalPages, page);\n}\n\nfunction exerciseListHandler(event) {\n  if (\n    event.target.nodeName === 'A' ||\n    event.target.nodeName === 'P' ||\n    event.target.nodeName === 'H3'\n  ) {\n    event.preventDefault();\n\n    const currentLink =\n      event.target.nodeName === 'A' ? event.target : event.target.closest('a');\n\n    exerciseListElem.dataset.isGroups = '';\n    exerciseListElem.dataset.groupName = currentLink.dataset.name;\n    renderExercises();\n\n    searchFormElem.classList.remove('visually-hidden');\n  } else if (exerciseListElem.dataset.groupName) {\n    const cardStartBtn = event.target.closest('.exercise-card-start-btn');\n    if (cardStartBtn) {\n      alert(cardStartBtn.getAttribute('data-open-id'));\n      return;\n    }\n  }\n}\n\nfunction filterListHandler(event) {\n  if (event.target.nodeName === 'BUTTON') {\n    getActiveFilterElem().classList.toggle('exercises-type-item-active');\n    event.target.classList.toggle('exercises-type-item-active');\n\n    renderGroups();\n\n    searchFormElem.reset();\n    searchFormElem.classList.add('visually-hidden');\n  }\n}\n\nfunction paginationListHandler(event) {\n  if (event.target.nodeName === 'A') {\n    event.preventDefault();\n\n    const page = Number(event.target.innerText);\n\n    exerciseListElem.dataset.isGroups\n      ? renderGroups(page)\n      : renderExercises(page);\n  }\n}\n\nfunction getActiveFilterElem() {\n  return document.querySelector('.exercises-type-item-active');\n}\n","import messages from './js/notificationAPI';\nimport backendAPI from './js/backendAPI';\nimport localStorageAPI from './js/localStorageAPI';\nimport startExercisesScenario from './js/excercises';\n\nimport './js/initialization';\n\nstartExercisesScenario();\n\n\n/////////////////////////////////////////////////////////////////////\n////// modal-rating\n// document.addEventListener('DOMContentLoaded', () => {\n//   const ratingStars = document.querySelectorAll('.feedback-rating-stars-svg');\n//   const ratingValue = document.querySelector('.feedback-form-rating-value');\n//   let currentRating = 0;\n\n//   ratingStars.forEach(star => {\n//     star.addEventListener('mouseenter', () => {\n//       const hoverStarIndex = Array.from(ratingStars).indexOf(star);\n//       highlightStars(hoverStarIndex);\n\n//       showStarValue(hoverStarIndex + 1);\n//     });\n\n//     star.addEventListener('mouseleave', () => {\n//       if (currentRating === 0) {\n//         resetRating();\n//       } else {\n//         highlightStars(currentRating - 1);\n//         showStarValue(currentRating);\n//       }\n//     });\n//     star.addEventListener('click', () => {\n//       const clickStarIndex = Array.from(ratingStars).indexOf(star) + 1;\n//       currentRating = clickStarIndex;\n//       ratingValue.textContent = `${currentRating}.0`;\n\n//       highlightStars(clickStarIndex - 1);\n//     });\n//   });\n\n//   function highlightStars(index) {\n//     ratingStars.forEach((star, i) => {\n//       if (i <= index) {\n//         star.classList.add('feedback-rating-stars-svg-highlight');\n//       } else {\n//         star.classList.remove('feedback-rating-stars-svg-highlight');\n//       }\n//     });\n//   }\n\n//   function resetRating() {\n//     ratingStars.forEach(star => {\n//       star.classList.remove('feedback-rating-stars-svg-highlight');\n//     });\n//     ratingValue.textContent = '0.0';\n//   }\n\n//   function showStarValue(value) {\n//     ratingValue.textContent = `${value}.0`;\n//   }\n// });\n\n////// modal-rating\n/////////////////////////////////////////////////////////////////////\n\n///////Subscription form/////////\nconst subscriptionForm = document.querySelector('.footer-subscription-form');\n\nsubscriptionForm.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const email = subscriptionForm.elements.email.value;\n\n  const response = await backendAPI.subscription(email);\n\n  if (response.result) {\n    messages.showSuccess(response.message);\n    subscriptionForm.elements.email.classList.remove('is-glowing');\n  } else {\n    messages.showError(response.message);\n  }\n\n  subscriptionForm.reset();\n});\n\n// const testItem = {\n//   _id: '64f389465ae26083f39b1af3',\n//   bodyPart: 'lower legs',\n//   equipment: 'sled machine',\n//   gifUrl: 'https://ftp.goit.study/img/power-pulse/gifs/1384.gif',\n//   name: 'hack one leg calf raise',\n//   target: 'calves',\n//   description:\n//     \"Located on the back of the lower leg, the calves include the gastrocnemius and soleus muscles. They're responsible for plantar flexion (raising the heel). Calves are targeted in exercises like calf raises and during running and jumping.\",\n//   rating: 3,\n//   burnedCalories: 286,\n//   time: 3,\n//   popularity: 105,\n// };\n\n// localStorageAPI.addItemToFavorites(testItem);\n// console.log(localStorageAPI.getFavorites());\n\n// localStorageAPI.deleteItemFromFavorites('64f389465ae26083f39b1af3');\n"],"names":["messages","textMessage","showMessage","message","type","iziToast","isMobileDevice","isDesktopDevice","filterListElem","exerciseListElem","paginationListElem","searchFormElem","inputElement","clearButton","startExercisesScenario","filterListHandler","exerciseListHandler","paginationListHandler","searchFormSubmitHandler","inputElementHandler","clearButtonHandler","windowResizeHandler","renderGroups","isDeviceChange","renderExercises","event","inputValue","page","queryParams","getActiveFilterElem","filtersData","backendAPI","renderItems","keyword","exercisesData","serverData","isCards","results","totalPages","markup","elem","renderAPI","currentLink","cardStartBtn","subscriptionForm","email","response"],"mappings":"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"}